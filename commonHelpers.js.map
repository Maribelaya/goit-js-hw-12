{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    aptions: true,\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    fadeSpeed: 150,\n    captionSelector: \"img\",\n    captionDelay: 250,\n    });       \n    lightbox.on('show.simplelightbox');\n\nexport function renderGallery(data, galleryContainer, page, totalImg){\n    const images = data.hits.\n            map(data => {\n                return `\n                <li class=\"gallery-item\"><a href=\"${data.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n                <ul class=\"gallery-image-data\">\n                <li class=\"data-quantity\"><b>Likes </b>${data.likes}</li>\n                <li class=\"data-quantity\"><b>Views </b>${data.views}</li>\n                <li class=\"data-quantity\"><b>Comments </b>${data.comments}</li>\n                <li class=\"data-quantity\"><b>Downloads </b>${data.downloads}</li>\n                </ul>\n                </li>`;\n            }).join('');\n\n        //Відображення на сторінці зображень\n        galleryContainer.insertAdjacentHTML(\"beforeend\", images);  \n    \n        //Відображення на сторінці кнопки \"Завантажити ще\", якщо не отримано усі зображення\n        if(page * 15 <= totalImg){\n            document.querySelector('.btn-more-container').style.display = 'flex';\n        } \n        else{\n            document.querySelector('.btn-more-container').style.display = 'none';\n        }\n\n        lightbox.refresh();\n}","import axios from 'axios'\n\nexport async function getImages(searchValue, page) {\n    const url = 'https://pixabay.com/api/';\n  \n    const params = {\n      key: '42469788-7d7013196b534fb1bad6f4ac3',\n      q: searchValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    };\n    const res = await axios.get(url, { params });\n    return res.data;\n  }","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n//Іморт функцій\nimport { renderGallery } from './js/render-functions';\nimport { getImages } from './js/pixabay-api';\n\nconst form = document.querySelector ('form');\nconst searchInput = document.querySelector ('input');\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderElem = document.querySelector('.loader-container');\nconst loaderMoreElem = document.querySelector('.loader-more');\nconst moreBtn = document.querySelector('.btn-more');\n\nlet searchValue = '';\nlet page = 1;\nlet totalImg = 0;\n\n//Подія відправлення форми\nform.addEventListener('submit', event => {\n    //Спрацьовує як перший запит (запит першої сторінки)\n    event.preventDefault();\n    searchValue = searchInput.value.trim();\n    //Вихід, якщо не вказано умову пошуку\n    if(!searchValue){\n        iziToast.error({\n            timeout: 1000,\n            message: \"Please enter a search value\",\n            position: 'topRight',\n            });     \n            return;           \n    }\n    searchInput.value = '';\n    galleryContainer.innerHTML = '';\n    page = 1; //Виконати запит першої сторінки для нового слова пошуку\n    totalImg = 0; //Перед першим запитом = 0\n    callPixabayAPI();\n});\n\n//Подія натискання кнопки\nmoreBtn.addEventListener('click', event => {\n    page = page + 1;\n    callPixabayAPI();\n});\n\nasync function callPixabayAPI(){\n    showLoader(); //Показати лоадер\n    const data = await getImages(searchValue, page);\n    if (data.hits.length === 0){\n        iziToast.error({\n            timeout: 1000,\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n            });\n    }\n    else{\n        //Якщо пошук був для першої сторінки - фіксація кількості зображень\n        if(page == 1) {\n            totalImg = data.totalHits;\n        }\n\n        renderGallery(data, galleryContainer, page, totalImg);\n\n        if(page > 1){\n            const height = galleryContainer.firstElementChild.getBoundingClientRect().height;\n            window.scrollBy({ top: height * 2, behavior: 'smooth' });\n        }\n\n        if(page * 15 > totalImg && totalImg > 15){\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                }); \n       }\n\n    }\n    hideLoader();//Сховати лоадер\n}\n\nfunction showLoader() {\n    if(page == 1){\n        loaderElem.style.display = 'flex';\n    }\n    else{\n        loaderMoreElem.style.display = 'inline-block';\n    }\n}\n\nfunction hideLoader() {\n    if (page == 1){\n        loaderElem.style.display = 'none';\n    }\n    else{\n        loaderMoreElem.style.display = 'none';\n    }\n}\n\n\n"],"names":["lightbox","SimpleLightbox","renderGallery","data","galleryContainer","page","totalImg","images","getImages","searchValue","url","params","axios","form","searchInput","loaderElem","loaderMoreElem","moreBtn","event","iziToast","callPixabayAPI","showLoader","height","hideLoader"],"mappings":"owBAKA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAC9C,QAAS,GACT,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,IACX,gBAAiB,MACjB,aAAc,GAClB,CAAK,EACDD,EAAS,GAAG,qBAAqB,EAE9B,SAASE,EAAcC,EAAMC,EAAkBC,EAAMC,EAAS,CACjE,MAAMC,EAASJ,EAAK,KACZ,IAAIA,GACO;AAAA,oDAC6BA,EAAK,aAAa;AAAA,kDACpBA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA,yDAE7BA,EAAK,KAAK;AAAA,yDACVA,EAAK,KAAK;AAAA,4DACPA,EAAK,QAAQ;AAAA,6DACZA,EAAK,SAAS;AAAA;AAAA,sBAG9D,EAAE,KAAK,EAAE,EAGdC,EAAiB,mBAAmB,YAAaG,CAAM,EAGpDF,EAAO,IAAMC,EACZ,SAAS,cAAc,qBAAqB,EAAE,MAAM,QAAU,OAG9D,SAAS,cAAc,qBAAqB,EAAE,MAAM,QAAU,OAGlEN,EAAS,QAAO,CACxB,CCzCO,eAAeQ,EAAUC,EAAaJ,EAAM,CAC/C,MAAMK,EAAM,2BAENC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMJ,CACZ,EAEI,OADY,MAAMO,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACf,CCPA,MAAME,EAAO,SAAS,cAAe,MAAM,EACrCC,EAAc,SAAS,cAAe,OAAO,EAC7CV,EAAmB,SAAS,cAAc,UAAU,EACpDW,EAAa,SAAS,cAAc,mBAAmB,EACvDC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIR,EAAc,GACdJ,EAAO,EACPC,EAAW,EAGfO,EAAK,iBAAiB,SAAUK,GAAS,CAKrC,GAHAA,EAAM,eAAc,EACpBT,EAAcK,EAAY,MAAM,OAE7B,CAACL,EAAY,CACZU,EAAS,MAAM,CACX,QAAS,IACT,QAAS,8BACT,SAAU,UACtB,CAAa,EACD,MACP,CACDL,EAAY,MAAQ,GACpBV,EAAiB,UAAY,GAC7BC,EAAO,EACPC,EAAW,EACXc,GACJ,CAAC,EAGDH,EAAQ,iBAAiB,QAASC,GAAS,CACvCb,EAAOA,EAAO,EACde,GACJ,CAAC,EAED,eAAeA,GAAgB,CAC3BC,IACA,MAAMlB,EAAO,MAAMK,EAAUC,EAAaJ,CAAI,EAC9C,GAAIF,EAAK,KAAK,SAAW,EACrBgB,EAAS,MAAM,CACX,QAAS,IACT,QAAS,2EACT,SAAU,UACtB,CAAa,MAEL,CAQA,GANGd,GAAQ,IACPC,EAAWH,EAAK,WAGpBD,EAAcC,EAAMC,EAAkBC,EAAMC,CAAQ,EAEjDD,EAAO,EAAE,CACR,MAAMiB,EAASlB,EAAiB,kBAAkB,sBAAqB,EAAG,OAC1E,OAAO,SAAS,CAAE,IAAKkB,EAAS,EAAG,SAAU,QAAQ,CAAE,CAC1D,CAEEjB,EAAO,GAAKC,GAAYA,EAAW,IAClCa,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC1B,CAAiB,CAGZ,CACDI,GACJ,CAEA,SAASF,GAAa,CACfhB,GAAQ,EACPU,EAAW,MAAM,QAAU,OAG3BC,EAAe,MAAM,QAAU,cAEvC,CAEA,SAASO,GAAa,CACdlB,GAAQ,EACRU,EAAW,MAAM,QAAU,OAG3BC,EAAe,MAAM,QAAU,MAEvC"}